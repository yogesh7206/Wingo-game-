<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Investment Website</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<style>
    body { margin: 0; font-family: Arial, sans-serif; background: #f5f5f5; }
    header { background: #007bff; color: white; text-align: center; padding: 10px; font-size: 20px; }
    .content { padding: 15px; }

    /* Bottom Navigation */
    .bottom-nav { 
        position: fixed; bottom: 0; width: 100%; background: white; 
        display: flex; justify-content: space-around; border-top: 1px solid #ccc;
    }
    .bottom-nav button { background: none; border: none; padding: 10px; flex: 1; font-size: 14px; color: #555; }
    .bottom-nav button.active { color: #007bff; }
    .bottom-nav i { display: block; font-size: 18px; margin-bottom: 3px; }

    /* Account Menu */
    .account-menu { display: none; }
    .account-item { background: white; padding: 15px; margin: 5px 0; display: flex; align-items: center; cursor: pointer; }
    .account-item i { font-size: 20px; margin-right: 10px; color: #007bff; }

    /* Wallet Card */
    .wallet-card { background: white; padding: 15px; border-radius: 10px; text-align: center; margin-bottom: 15px; }
    .wallet-card h2 { margin: 10px 0; }
    .wallet-actions button { margin: 5px; padding: 10px 15px; background: #007bff; color: white; border: none; border-radius: 5px; }
</style>
</head>
<body>

<header id="headerTitle">Home</header>
<div class="content" id="mainContent">

    <!-- Home Section -->
    <div id="homeSection">
        <h2>Welcome to the Investment Website</h2>
        <p>Start earning by investing today.</p>
    </div>

    <!-- Invest Section -->
    <div id="investSection" style="display:none;">
        <h2>Invest</h2>
        <p>Investment plans will be shown here.</p>
    </div>

    <!-- Blog Section -->
    <div id="blogSection" style="display:none;">
        <h2>Blog</h2>
        <p>Latest news and articles.</p>
    </div>

    <!-- Notice Section -->
    <div id="noticeSection" style="display:none;">
        <h2>Notice</h2>
        <p>Important announcements will appear here.</p>
    </div>

    <!-- Account Section -->
    <div id="accountSection" class="account-menu" style="display:none;">
        <!-- Wallet -->
        <div class="wallet-card">
            <p>User ID: <span id="userIdDisplay">------</span></p>
            <h2>â‚¹<span id="walletBalance">0.00</span></h2>
            <div class="wallet-actions">
                <button onclick="openRecharge()">Recharge</button>
                <button onclick="openWithdraw()">Withdraw</button>
            </div>
        </div>
        <!-- Account Items -->
        <div class="account-item" onclick="openTeam()"><i class="fas fa-users"></i> Team</div>
        <div class="account-item" onclick="openMyProduct()"><i class="fas fa-box"></i> My Product</div>
        <div class="account-item" onclick="openBankCard()"><i class="fas fa-credit-card"></i> Bank Card</div>
        <div class="account-item" onclick="openTransaction()"><i class="fas fa-list"></i> Transaction</div>
        <div class="account-item" onclick="openCustomerService()"><i class="fas fa-headset"></i> Customer Service</div>
        <div class="account-item" onclick="openResetPassword()"><i class="fas fa-key"></i> Reset Password</div>
        <div class="account-item" onclick="logoutUser()"><i class="fas fa-sign-out-alt"></i> Logout</div>
    </div>

</div>

<!-- Bottom Navigation -->
<div class="bottom-nav">
    <button id="homeBtn" class="active" onclick="showSection('home')"><i class="fas fa-home"></i>Home</button>
    <button onclick="showSection('invest')"><i class="fas fa-chart-line"></i>Invest</button>
    <button onclick="showSection('blog')"><i class="fas fa-blog"></i>Blog</button>
    <button onclick="showSection('notice')"><i class="fas fa-bullhorn"></i>Notice</button>
    <button onclick="showSection('account')"><i class="fas fa-user"></i>Account</button>
</div>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
<script>
  // Firebase Config
  const firebaseConfig = {
    apiKey: "AIzaSyDvF1KrDDRZJucp-78dbvmQ34Oi3j17Rrk",
    authDomain: "investment-website-deml.firebaseapp.com",
    projectId: "investment-website-deml",
    storageBucket: "investment-website-deml.firebasestorage.app",
    messagingSenderId: "814451995593",
    appId: "1:814451995593:web:55e3280d9cb43200f1ee18",
    measurementId: "G-8FKZE5NNSX",
    databaseURL: "https://investment-website-deml-default-rtdb.firebaseio.com/"
  };
  firebase.initializeApp(firebaseConfig);
</script>
<script>
/* =========================
   Navigation System
========================= */
function showSection(section) {
    document.querySelectorAll('.content > div').forEach(div => div.style.display = 'none');
    document.getElementById(section + 'Section').style.display = 'block';

    // Update header title
    const titles = { home: "Home", invest: "Invest", blog: "Blog", notice: "Notice", account: "Account" };
    document.getElementById("headerTitle").textContent = titles[section];

    // Update active button
    document.querySelectorAll('.bottom-nav button').forEach(btn => btn.classList.remove('active'));
    document.querySelector(`.bottom-nav button[onclick="showSection('${section}')"]`).classList.add('active');
}

/* =========================
   Firebase Auth Logic
========================= */
firebase.auth().onAuthStateChanged(user => {
    if (user) {
        loadUserData(user.uid);
    } else {
        loginUser();
    }
});

function loginUser() {
    let email = prompt("Enter Email:");
    let password = prompt("Enter Password:");
    firebase.auth().signInWithEmailAndPassword(email, password)
        .catch(error => {
            if (error.code === "auth/user-not-found") {
                // Create new account with 6-digit ID
                let newId = Math.floor(100000 + Math.random() * 900000).toString();
                firebase.auth().createUserWithEmailAndPassword(email, password)
                    .then(cred => {
                        firebase.database().ref("users/" + cred.user.uid).set({
                            email: email,
                            userId: newId,
                            balance: 0
                        });
                    });
            } else {
                alert(error.message);
            }
        });
}

function logoutUser() {
    firebase.auth().signOut().then(() => {
        alert("Logged out successfully");
        loginUser();
    });
}

/* =========================
   Load User Data
========================= */
function loadUserData(uid) {
    firebase.database().ref("users/" + uid).on("value", snapshot => {
        if (snapshot.exists()) {
            let data = snapshot.val();
            document.getElementById("userIdDisplay").textContent = data.userId || "------";
            document.getElementById("walletBalance").textContent = (data.balance || 0).toFixed(2);
        }
    });
}

/* =========================
   Wallet Actions
========================= */
function openRecharge() {
    let amount = parseFloat(prompt("Enter recharge amount:"));
    if (!isNaN(amount) && amount > 0) {
        let uid = firebase.auth().currentUser.uid;
        firebase.database().ref("users/" + uid).once("value").then(snapshot => {
            let balance = snapshot.val().balance || 0;
            firebase.database().ref("users/" + uid).update({ balance: balance + amount });
            alert("Recharge successful");
        });
    }
}

function openWithdraw() {
    let amount = parseFloat(prompt("Enter withdraw amount:"));
    if (!isNaN(amount) && amount > 0) {
        let uid = firebase.auth().currentUser.uid;
        firebase.database().ref("users/" + uid).once("value").then(snapshot => {
            let balance = snapshot.val().balance || 0;
            if (balance >= amount) {
                firebase.database().ref("users/" + uid).update({ balance: balance - amount });
                alert("Withdraw successful");
            } else {
                alert("Insufficient balance");
            }
        });
    }
}

/* =========================
   Dummy Page Openers
========================= */
function openTeam() { alert("Team Page Coming Soon"); }
function openMyProduct() { alert("My Product Page Coming Soon"); }
function openBankCard() { alert("Bank Card Page Coming Soon"); }
function openTransaction() { alert("Transaction Page Coming Soon"); }
function openCustomerService() { alert("Customer Service Page Coming Soon"); }
function openResetPassword() { alert("Reset Password Page Coming Soon"); }
</script>
</body>
</html>
