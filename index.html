<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Investment Website</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body { font-family: Arial, sans-serif; margin:0; background:#f8f9fa; }
header { background:#ff6600; color:white; padding:10px; text-align:center; }
nav { display:flex; justify-content:space-around; background:#fff; border-top:1px solid #ccc; position:fixed; bottom:0; width:100%; }
nav button { background:none; border:none; padding:10px; font-size:14px; }
section { display:none; padding:15px; }
.active { display:block; }
#userInfo { background:#e9ecef; padding:12px; border-radius:12px; margin-bottom:15px; text-align:center; }
</style>
</head>
<body>

<header>
  <h1>Investment Website</h1>
</header>

<!-- Account Section -->
<section id="accountSection">
  <div id="userInfo">
    <p><strong>Email/Mobile:</strong> <span id="userEmail">-</span></p>
    <p><strong>User ID:</strong> <span id="user6Id">-</span></p>
  </div>
  <div>
    <p>Balance: <span id="balance">‚Çπ0</span></p>
    <p>Recharge Total: <span id="recharge">‚Çπ0</span></p>
    <p>Withdrawal Total: <span id="withdrawal">‚Çπ0</span></p>
    <p>Product Revenue: <span id="productRevenue">‚Çπ0</span></p>
    <p>My Orders: <span id="myOrders">0</span></p>
  </div>
</section>

<!-- Login Section -->
<section id="loginSection" class="active">
  <h2>Login</h2>
  <input type="email" id="loginEmail" placeholder="Email"><br><br>
  <input type="password" id="loginPassword" placeholder="Password"><br><br>
  <button onclick="login()">Login</button>
  <p>Or Register:</p>
  <input type="email" id="registerEmail" placeholder="Email"><br><br>
  <input type="password" id="registerPassword" placeholder="Password"><br><br>
  <button onclick="register()">Register</button>
</section>

<!-- Navigation -->
<nav id="bottomNav" style="display:none;">
  <button onclick="showSection('homeSection')">üè† Home</button>
  <button onclick="showSection('investmentSection')">üíº Investment</button>
  <button onclick="showSection('blogSection')">üì∞ Blog</button>
  <button onclick="showSection('noticeSection')">üì¢ Notice</button>
  <button onclick="showSection('accountSection')">üë§ Account</button>
</nav>

<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>

<script>
// Firebase Config
const firebaseConfig = {
  apiKey: "AIzaSyDvF1KrDDRZJucp-78dbvmQ34Oi3j17Rrk",
  authDomain: "investment-website-deml.firebaseapp.com",
  projectId: "investment-website-deml",
  storageBucket: "investment-website-deml.firebasestorage.app",
  messagingSenderId: "814451995593",
  appId: "1:814451995593:web:55e3280d9cb43200f1ee18",
  measurementId: "G-8FKZE5NNSX"
};
firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();
const db = firebase.firestore();

// Navigation
function showSection(id) {
  document.querySelectorAll('section').forEach(sec=>sec.classList.remove('active'));
  document.getElementById(id).classList.add('active');
}

// Auth State Change
auth.onAuthStateChanged(async (user) => {
  const nav = document.getElementById('bottomNav');
  if (!user) {
    nav.style.display = 'none';
    showSection('loginSection');
    return;
  }
  nav.style.display = 'flex';
  showSection('homeSection');

  const UID = user.uid;
  const userRef = db.collection('users').doc(UID);
  const snap = await userRef.get();

  if (!snap.exists) {
    await userRef.set({
      userId: Math.floor(100000 + Math.random()*900000),
      balance: 0,
      rechargeTotal: 0,
      withdrawalTotal: 0,
      productRevenue: 0,
      orders: 0,
      email: user.email || user.phoneNumber || '-'
    });
  } else {
    const data = snap.data();
    const updates = {};
    if (!data.userId) updates.userId = Math.floor(100000 + Math.random()*900000);
    if (!data.email) updates.email = user.email || user.phoneNumber || '-';
    if (Object.keys(updates).length > 0) await userRef.update(updates);
  }

  // Live user info
  userRef.onSnapshot(doc => {
    const d = doc.data() || {};
    document.getElementById('balance').textContent = '‚Çπ' + (d.balance || 0);
    document.getElementById('recharge').textContent = '‚Çπ' + (d.rechargeTotal || 0);
    document.getElementById('withdrawal').textContent = '‚Çπ' + (d.withdrawalTotal || 0);
    document.getElementById('productRevenue').textContent = '‚Çπ' + (d.productRevenue || 0);
    document.getElementById('myOrders').textContent = d.orders || 0;
    document.getElementById('userEmail').textContent = d.email || user.email || user.phoneNumber || '-';
    document.getElementById('user6Id').textContent = d.userId || '-';
  });
});
    // Register
async function register() {
  const email = document.getElementById('registerEmail').value.trim();
  const password = document.getElementById('registerPassword').value.trim();
  if (!email || !password) return alert('Enter email and password');
  try {
    const cred = await auth.createUserWithEmailAndPassword(email, password);
    const user = cred.user;
    await db.collection('users').doc(user.uid).set({
      userId: Math.floor(100000 + Math.random()*900000),
      balance: 0,
      rechargeTotal: 0,
      withdrawalTotal: 0,
      productRevenue: 0,
      orders: 0,
      email: user.email
    });
    alert('Registered successfully!');
  } catch (err) {
    alert(err.message);
  }
}

// Login
async function login() {
  const email = document.getElementById('loginEmail').value.trim();
  const password = document.getElementById('loginPassword').value.trim();
  if (!email || !password) return alert('Enter email and password');
  try {
    await auth.signInWithEmailAndPassword(email, password);
  } catch (err) {
    alert(err.message);
  }
}

// Sections for navigation
document.body.insertAdjacentHTML('beforeend', `
<section id="homeSection">
  <h2>Home</h2>
  <p>Welcome to your investment dashboard!</p>
</section>

<section id="investmentSection">
  <h2>Investment</h2>
  <p>Investment plans will be displayed here.</p>
</section>

<section id="blogSection">
  <h2>Blog</h2>
  <p>Latest investment news.</p>
</section>

<section id="noticeSection">
  <h2>Notice</h2>
  <p>Important announcements will appear here.</p>
</section>
`);

</script>
</body>
</html>
