<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Wingo Game</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      font-family: Arial;
      text-align: center;
      background: #eaf1ff;
      padding: 20px;
    }
    input, button, select {
      padding: 10px;
      margin: 5px;
      font-size: 16px;
      border-radius: 6px;
      border: 1px solid #ccc;
    }
    .hidden { display: none; }
    .red { background: #e53935; color: white; }
    .green { background: #43a047; color: white; }
    .violet { background: #8e24aa; color: white; }
    .big, .small { background: #ff9800; color: white; }
    .chart-box, .trend-box, .scroll-box {
      margin-top: 20px;
      background: white;
      border-radius: 10px;
      padding: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    .chart-box canvas {
      max-width: 100%;
    }
    .scroll-box {
      max-height: 200px;
      overflow-y: auto;
      text-align: left;
    }
    #gameSection {
      max-width: 600px;
      margin: auto;
    }
    .number-btn {
      width: 40px;
      margin: 2px;
    }
    #errorBox {
      color: red;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <div id="loginSection">
    <h2>Login</h2>
    <input type="email" id="loginEmail" placeholder="Email"><br />
    <input type="password" id="loginPass" placeholder="Password"><br />
    <button id="loginBtn">Login</button>
    <p>Don't have an account? <a href="#" onclick="toggleRegister()">Register</a></p>
    <p id="errorBox"></p>
  </div>  <div id="registerSection" class="hidden">
    <h2>Register</h2>
    <input type="email" id="regEmail" placeholder="Email"><br />
    <input type="password" id="regPass" placeholder="Password"><br />
    <button id="registerBtn">Register</button>
    <p>Already have an account? <a href="#" onclick="toggleRegister()">Login</a></p>
    <p id="errorBox"></p>
  </div>  <div id="gameSection" class="hidden">
    <h2>Welcome, <span id="userEmail"></span>!</h2>
    <p>User ID: <span id="userIdDisplay"></span></p>
    <h3>Balance: ‚Çπ<span id="wallet">0</span></h3>
    <h3>Select Game Duration:</h3>
    <select id="gameType">
      <option value="30">30 Sec</option>
      <option value="60">1 Min</option>
      <option value="180">3 Min</option>
      <option value="300">5 Min</option>
    </select>
    <p id="countdown">‚è≥ Time Left: --</p>
    <p><strong>Current Period:</strong> <span id="periodDisplay">--</span></p>
    <div>
      <button class="red" onclick="selectColor('RED')">Red</button>
      <button class="green" onclick="selectColor('GREEN')">Green</button>
      <button class="violet" onclick="selectColor('VIOLET')">Violet</button>
    </div>
    <div>
      <button class="big" onclick="selectBigSmall('BIG')">Big</button>
      <button class="small" onclick="selectBigSmall('SMALL')">Small</button>
    </div>
    <div>
      <h4>Number (0‚Äì9):</h4>
      <div id="numberOptions"></div>
    </div>
    <input type="number" id="bet" step="0.1" placeholder="Enter Bet ‚Çπ">
    <p id="result"></p><div class="chart-box">
  <h4>üìà Color Frequency Chart</h4>
  <canvas id="colorChart"></canvas>
</div>

<div class="trend-box">
  <h4>üî• Hot & Cold Numbers</h4>
  <div id="trendData"></div>
</div>

<div class="scroll-box">
  <h4>üìã Last 20 Results</h4>
  <ul id="scrollHistory"></ul>
</div>

<button onclick="logout()">Logout</button>

  </div>  <script>
    const ctx = document.getElementById('colorChart').getContext('2d');
    const colorChart = new Chart(ctx, {
      type: 'bar',
      data: {
        labels: ['Red', 'Green', 'Violet'],
        datasets: [{
          label: 'Color Frequency',
          data: [0, 0, 0],
          backgroundColor: ['#e53935', '#43a047', '#8e24aa']
        }]
      },
      options: {
        responsive: true,
        scales: {
          y: {
            beginAtZero: true
          }
        }
      }
    });

    function updateCharts(results) {
      let colorCounts = { RED: 0, GREEN: 0, VIOLET: 0 };
      let numberCounts = Array(10).fill(0);
      let scrollHtml = '';

      const periods = Object.keys(results).sort().reverse().slice(0, 20);
      for (let key of periods) {
        const r = results[key];
        colorCounts[r.color]++;
        numberCounts[r.number]++;
        scrollHtml += `<li>üî¢ <strong>${key}:</strong> ${r.number} - ${r.color}</li>`;
      }

      colorChart.data.datasets[0].data = [colorCounts.RED, colorCounts.GREEN, colorCounts.VIOLET];
      colorChart.update();

      document.getElementById('scrollHistory').innerHTML = scrollHtml;

      const hot = [...numberCounts.entries()].sort((a, b) => b[1] - a[1]).slice(0, 3);
      const cold = [...numberCounts.entries()].sort((a, b) => a[1] - b[1]).slice(0, 3);

      document.getElementById('trendData').innerHTML = `
        üî• Hot: ${hot.map(h => h[0]).join(', ')}<br>
        üßä Cold: ${cold.map(c => c[0]).join(', ')}`;
    }

    // Example Firebase data update simulation:
    // Replace with actual Firebase result reading logic.
    // Call updateCharts(resultData) when data is fetched.
  </script></body>
</html>
